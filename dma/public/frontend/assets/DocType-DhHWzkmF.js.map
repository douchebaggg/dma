{"version":3,"file":"DocType-DhHWzkmF.js","sources":["../../../../frontend/src/views/doctype/ListDoctype.vue","../../../../frontend/src/views/DocType.vue"],"sourcesContent":["<template>\r\n    <ion-page>\r\n        <ion-content :fullscreen=\"true\">\r\n          <div class=\"m-4\">\r\n          <ion-card class=\"mb-2 rounded-xl border-0 shadow-xs\">\r\n            <ion-accordion-group class=\" m-4\">\r\n              <ion-accordion class=\"rounded-xl\" value=\"first\">\r\n                <ion-item slot=\"header\" lines=\"none\">\r\n                  <ion-label>Basket Doctype</ion-label>\r\n                </ion-item>\r\n                <div class=\"ion-padding\" slot=\"content\" v-if=\"basketDisplay.length > 0\">\r\n                  <ul>\r\n                  <li class=\"ml-5\" v-for=\"doc in basketDisplay\" >{{ doc }}</li>\r\n                  </ul>\r\n                </div>\r\n                <div class=\"ion-padding\" slot=\"content\" v-else>\r\n                  <p class=\"ml-5\">No Document found</p>\r\n                </div>\r\n              </ion-accordion>\r\n              <ion-accordion class=\"rounded-xl\" value=\"second\">\r\n                <ion-item slot=\"header\" lines=\"none\">\r\n                  <ion-label>Pallet</ion-label>\r\n                </ion-item>\r\n                <div class=\"ion-padding \" slot=\"content\" v-if=\"palletDisplay.length > 0\">\r\n                  <ul>\r\n                  <li class=\"ml-5\" v-for=\"doc in palletDisplay\">\r\n                    <ion-checkbox label-placement=\"end\" justify=\"start\">{{ doc }} \r\n                    </ion-checkbox>\r\n                  </li>\r\n                  </ul>\r\n                </div>\r\n                <div class=\"ion-padding \" slot=\"content\" v-else>\r\n                  <p class=\"ml-5\">No Document found</p>\r\n                </div>\r\n              </ion-accordion>\r\n              <ion-select aria-label=\"Doctype\" v-model=\"selectedDoctype\" interface=\"popover\" placeholder=\"Select Basket Doctype\" fill=\"outline\"\r\n              @ionChange=\"closePopover\"\r\n              >\r\n                <ion-select-option v-for=\"doctype in basketDisplay\" :key=\"doctype\" :value=\"doctype\">\r\n                  {{ doctype }}\r\n                </ion-select-option>\r\n              </ion-select>\r\n            </ion-accordion-group>\r\n          </ion-card>\r\n          </div>\r\n           <!-- Dropdown for selecting Doctype -->\r\n           \r\n      </ion-content>\r\n    </ion-page>\r\n</template>\r\n<script setup lang=\"ts\">\r\nimport { IonPage, \r\n  IonContent, \r\n  IonAccordion, \r\n  IonAccordionGroup, \r\n  IonItem, \r\n  IonLabel, \r\n  IonCheckbox,\r\n  IonSelect,\r\n  IonSelectOption,\r\n  IonDatetime, IonDatetimeButton, IonCard\r\n} from '@ionic/vue';\r\nimport { ref, onMounted, watch } from 'vue'\r\nimport { frappeSDK } from '@/utils/frappeSDK';\r\nconst { db } = frappeSDK()\r\nconst basketDisplay = ref<any>([])\r\nconst palletDisplay = ref<any>([])\r\nconst doctypeOptions = ref(['Purchase Order', 'Sales Order']);\r\nconst selectedDoctype = ref(basketDisplay.value[0]);\r\nconst date = ref()\r\nconst displayDoctype = async (doctype: string) => {\r\n  const getBasket = await db.getDocList('Purchase Order',{\r\n  fields: ['name', 'creation'],\r\n\tlimit: 10, \r\n  //filters: [['name','=','BK202409-012']],\r\n\torderBy: { field: 'modified',order: 'desc',} \r\n  })\r\n  basketDisplay.value = getBasket.map(doc => doc.name)\r\n\r\n  //pallet\r\n  const getPallet = await db.getDocList('Sales Order',{\r\n    fields: ['name', 'creation'],\r\n    limit: 10, \r\n    orderBy: { field: 'modified',order: 'desc',} \r\n  })\r\n  palletDisplay.value = getPallet.map(doc => doc.name)\r\n}\r\nwatch(selectedDoctype, (newDoctype) => {\r\n  displayDoctype(newDoctype);\r\n  console.log(selectedDoctype.value);\r\n});\r\nonMounted(() => {\r\n  displayDoctype(selectedDoctype.value);\r\n})\r\n\r\nconst closePopover = () => {\r\n  document.querySelectorAll('ion-popover').forEach((popover) => popover.dismiss());\r\n};\r\n\r\n</script>\r\n<style scoped>\r\n  ion-item{\r\n    padding: 0;\r\n    border: none;\r\n    \r\n  }\r\n\r\n  ion-accordion {\r\n    margin: 10px auto;\r\n  }\r\n\r\n  ion-accordion.accordion-collapsing ion-item[slot='header'],\r\n  ion-accordion.accordion-collapsed ion-item[slot='header'] {\r\n    --background: var(--ion-color-light);\r\n    --color: var(--ion-color-light-contrast);\r\n  }\r\n\r\n  ion-accordion.accordion-expanding ion-item[slot='header'],\r\n  ion-accordion.accordion-expanded ion-item[slot='header'] {\r\n    --background: var(--ion-color-primary);\r\n    --color: var(--ion-color-primary-contrast);\r\n  }\r\n\r\n</style>","<template>\n\t<ion-page>\n\t\t<ion-header>\n\t\t\t<ion-toolbar>\n\t\t\t\t<ion-title class=\"ion-text-center\">รายการเอกสารทั้งหมด</ion-title>\n\t\t\t</ion-toolbar>\n\t\t</ion-header>\n\t\t<ion-content :fullscreen=\"true\">\n      <ion-refresher slot=\"fixed\" @ionRefresh=\"handleRefresh\">\n        <ion-refresher-content\n          pulling-text=\"Pull to refresh\"\n          refreshing-spinner=\"dots\"\n          refreshing-text=\"Refreshing...\"\n        >\n        </ion-refresher-content>\n      </ion-refresher>\n        <ListDoctype class=\"mt-32\" />\n\t\t</ion-content>\n\n\t</ion-page>\n</template>\n<script lang=\"ts\" setup>\nimport {\n\tIonPage,\n\tIonHeader,\n\tIonToolbar,\n\tIonTitle,\n\tIonContent,\n  IonList,\n  IonButton,\n  IonCard,\n  IonCardHeader,\n  modalController,\n  IonRefresher,\n  IonRefresherContent,\n  IonItem\n} from \"@ionic/vue\"\nimport { onMounted, ref } from \"vue\";\n//import { RouterLink } from \"vue-router\";\nimport DoctypeCreate from \"./doctype/DoctypeCreate.vue\";\nimport { urlPort  } from \"@/utils/checkIP\";\nimport ListDoctype from \"./doctype/ListDoctype.vue\";\nimport { App } from \"@capacitor/app\"\nimport { Browser } from \"@capacitor/browser\";\nimport { frappeSDK } from \"@/utils/frappeSDK\";\nonMounted(() => {\n  setTheme()\n\tgetDoctype()\n})\nconst displayDoc = ref(null)\nconst displayWorkOrder = ref(null)\nconst { db } = frappeSDK()\nconst message = ref('');\n\nconst getDoctype = async () => {\n  const allDoctype = await db.getDocList('Purchase Order', { \n\tfields: ['name', 'creation'],\n\tlimit: 10, \n  //filters: [['name','=','BK202409-012']],\n\torderBy: { field: 'modified',order: 'desc',} \n});\n  let docNameWithProducts = null;\n  for (const doc of allDoctype) {\n    const docType = await db.getDoc('Purchase Order', doc.name);\n    if (docType.items && docType.items.length > 0) {\n      docNameWithProducts = doc.name;\n      displayDoc.value = docType.items;\n      //console.log(docType,\"\\n Success\");\n    }\n    else {\n      docNameWithProducts = doc.name;\n      displayDoc.value = docType.idx;\n      //console.log(docType);\n      //console.log(displayDoc.value)\n    }\n    if(docType.item_code && docType.item_code.length > 0){\n      //console.log(docType.item_code)\n      displayWorkOrder.value = docType.item_code;\n      break;\n    } \n  }\n\n  if (!docNameWithProducts) {\n    console.log('No document found');\n  } else {\n    console.log('List all Docname',allDoctype, docNameWithProducts);\n  }\n};\nconst handleRefresh = async (event: CustomEvent) => {\n  try {\n    await getDoctype()\n    setTimeout(() => {\n      event.detail.complete();\n    }, 2000);\n  } catch (error) {\n    console.error(\"Error refreshing user data:\", error);\n  }\n}\n\nconst isDarkMode = ref(window.matchMedia('(prefers-color-scheme: dark)').matches)\n\tconst setTheme = () => {\n\t\tconst theme = localStorage.getItem(\"darkMode\")\n\t\tif(theme !== null) {\n\t\t\tisDarkMode.value = JSON.parse(theme)\n\t\t\tconsole.log(isDarkMode.value)\n\t\t\tdocument.documentElement.classList.toggle('ion-palette-dark', isDarkMode.value)\n\t\t} \n\t}\n</script>\n\n<style scoped>\n.newDoctype{\n  margin: auto;\n  display: block;\n\n}\nion-card{\n  height: 35vh;\n  overflow: auto;\n  scroll-behavior: smooth;\n}\n.sticky-header {\n  font-size: large;\n  position: sticky;\n  top: 0;\n  z-index: 100; \n  background-color: whitesmoke;\n}\n.work-order{\n  font-size: larger;\n}\n</style>"],"names":["db","frappeSDK","basketDisplay","ref","palletDisplay","selectedDoctype","displayDoctype","doctype","getBasket","doc","getPallet","watch","newDoctype","onMounted","closePopover","popover","_createBlock","_unref","IonPage","_createVNode","IonContent","_createElementVNode","_hoisted_1","IonCard","IonAccordionGroup","IonAccordion","IonItem","IonLabel","_cache","_openBlock","_createElementBlock","_hoisted_2","_Fragment","_renderList","_hoisted_3","_toDisplayString","_hoisted_4","_hoisted_5","_hoisted_6","IonCheckbox","_hoisted_7","IonSelect","$event","IonSelectOption","setTheme","getDoctype","displayDoc","displayWorkOrder","allDoctype","docNameWithProducts","docType","handleRefresh","event","error","isDarkMode","theme","IonHeader","IonToolbar","IonTitle","IonRefresher","IonRefresherContent","ListDoctype"],"mappings":"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"}