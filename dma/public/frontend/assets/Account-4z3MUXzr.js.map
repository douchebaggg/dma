{"version":3,"file":"Account-4z3MUXzr.js","sources":["../../../../frontend/src/views/Account.vue"],"sourcesContent":["<template>\n\t<ion-page>\n\t\t<ion-header>\n\t\t\t<ion-toolbar>\n\t\t\t\t<ion-title class=\"ion-text-center\">{{ t(\"account.my_account\", \"My Account\") }}</ion-title>\n\t\t\t</ion-toolbar>\n\t\t</ion-header>\n\t\t<ion-content :fullscreen=\"true\" :scroll-events=\"true\">\n\t\t\t<div class=\"flex h-full flex-col justify-between\">\n\t\t\t\t<div v-if=\"user.data\" class=\"m-6 flex flex-col\">\n\t\t\t\t\t<Card class=\"mb-4 rounded-xl\">\n\t\t\t\t\t\t<div class=\"flex items-center justify-center py-5\">\n\t\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\t  \t:shape=\"'square'\"\n\t\t\t\t\t\t\t  \t:ref_for=\"true\"\n\t\t\t\t\t\t\t\tsize=\"xl\"\n\t\t\t\t\t\t\t\tclass=\"bg-gray-200 h-24 w-24\"\n\t\t\t\t\t\t\t\t:image=\"`${user.data.user_image}?t=${Date.now()}`\"\n\t\t\t\t\t\t\t\t:label=\"user.data.full_name\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"flex-col items-start justify-start ion-margin\">\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\tclass=\"rounded-xl py-2\"\n\t\t\t\t\t\t\t\t:label=\"t('preferences.language')\"\n\t\t\t\t\t\t\t\ttype=\"select\"\n\t\t\t\t\t\t\t\t:options=\"availableLanguages\"\n\t\t\t\t\t\t\t\tv-model=\"locale\"\n\t\t\t\t\t\t\t\tstyle=\"\n\t\t\t\t\t\t\t\tpadding-left: 1rem;\n\t\t\t\t\t\t\t\toutline: none; \n\t\t\t\t\t\t\t\tbackground-image: none; \n\t\t\t\t\t\t\t\tborder: solid 1px grey;\n\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Card>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tclass=\"rounded-xl ion-margin-top text-white bg-red-600\"\n              \t\t\t:variant=\"'solid'\"\n\t\t\t\t\t\ttheme=\"red\"\n\t\t\t\t\t\tsize=\"md\"\n\t\t\t\t\t\t@click=\"session.logout.submit()\"\n\t\t\t\t\t\t>{{ t(\"auth.logout\") }}</Button>\n\t\t\t\t</div>\n\t\t\t\t<div v-else class=\"m-6 flex flex-col items-center\"> \n\t\t\t\t\t<Button\n\t\t\t\t\t\tclass=\"rounded-2xl ion-margin-top text-white bg-red-600 w-full\"\n              \t\t\t:variant=\"'solid'\"\n\t\t\t\t\t\ttheme=\"red\"\n\t\t\t\t\t\tsize=\"md\"\n\t\t\t\t\t\t@click=\"session.logout.submit()\"\n\t\t\t\t\t\t>{{ t(\"auth.logout\") }}</Button>\n\t\t\t\t</div>\n\t\t\t\t<footer\n\t\t\t\t\tclass=\"flex flex-col items-center justify-center p-4 text-center text-sm text-gray-500\"\n\t\t\t\t>\n\t\t\t\t\t<span>ALZO Mobile App</span>\n\t\t\t\t\t<span>Version {{ appVersion }}</span>\t\t\t\t\n\t\t\t\t</footer>\n\t\t\t</div>\t\t\t\n\n\t\t</ion-content>\n\t</ion-page>\n</template>\n\n<script lang=\"ts\" setup>\nimport { inject, watch, onMounted, ref } from \"vue\"\nimport { useI18n } from \"vue-i18n\"\nimport { Avatar, createResource } from \"frappe-ui\"\nimport {\n\tsessionInjectionKey,\n\tuserResourceInjectionKey,\n} from \"@/typing/InjectionKeys\"\nimport { userResource } from \"../data/user\"\nimport { setDefaultLanguage } from \"@/locales/devices\"\nimport {\n\tIonPage,\n\tIonHeader,\n\tIonToolbar,\n\tIonTitle,\n\tIonContent,\n} from \"@ionic/vue\"\nimport { urlPort } from \"@/utils/checkIP\"\nimport { frappeSDK } from \"@/utils/frappeSDK\"\nconst session = inject(sessionInjectionKey)\nconst user = inject(userResourceInjectionKey)\nconst { call } = frappeSDK();\nconst appVersion = ref(null)\nconst getApp = async() => {\n\tconst res = await call.get('frappe.api.get_app_version');\n\tappVersion.value = res.message\n}\n/*const appVersion = createResource({\n\turl: \"http://erp.alzo.io:10580/api/method/dma.api.get_app_version\",\n\tauto: true,\n})*/\n\nconst { t, locale } = useI18n()\nconst availableLanguages = [\n\t{ label: \"English\", value: \"en\" },\n\t{ label: \"ไทย\", value: \"th\" },\n]\nwatch(locale, (newLocale) => {\n\tlocalStorage.setItem(\"preferredLanguage\", newLocale)\n})\n\nonMounted(() => {\n\tsetDefaultLanguage();\n\trefreshUser();\n\tgetApp();\n})\n\nconst refreshUser = async () => {\n\tif(user.data.first_name === \"\"){\n\t\tawait userResource.reload()\n\t\tuser.data = userResource.data\n\t}\n}\n\n</script>\n"],"names":["session","inject","sessionInjectionKey","user","userResourceInjectionKey","call","frappeSDK","appVersion","ref","getApp","res","t","locale","useI18n","availableLanguages","watch","newLocale","onMounted","setDefaultLanguage","refreshUser","userResource"],"mappings":"4pBAqFM,MAAAA,EAAUC,EAAOC,CAAmB,EACpCC,EAAOF,EAAOG,CAAwB,EACtC,CAAE,KAAAC,CAAK,EAAIC,EAAU,EACrBC,EAAaC,EAAI,IAAI,EACrBC,EAAS,SAAW,CACzB,MAAMC,EAAM,MAAML,EAAK,IAAI,4BAA4B,EACvDE,EAAW,MAAQG,EAAI,OACxB,EAMM,CAAE,EAAAC,EAAG,OAAAC,CAAO,EAAIC,EAAQ,EACxBC,EAAqB,CAC1B,CAAE,MAAO,UAAW,MAAO,IAAK,EAChC,CAAE,MAAO,MAAO,MAAO,IAAK,CAC7B,EACMC,EAAAH,EAASI,GAAc,CACf,aAAA,QAAQ,oBAAqBA,CAAS,CAAA,CACnD,EAEDC,EAAU,IAAM,CACIC,EAAA,EACPC,EAAA,EACLV,EAAA,CAAA,CACP,EAED,MAAMU,EAAc,SAAY,CAC5BhB,EAAK,KAAK,aAAe,KAC3B,MAAMiB,EAAa,OAAO,EAC1BjB,EAAK,KAAOiB,EAAa,KAE3B"}