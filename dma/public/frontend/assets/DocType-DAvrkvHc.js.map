{"version":3,"file":"DocType-DAvrkvHc.js","sources":["../../../../frontend/src/views/doctype/ListDoctype.vue","../../../../frontend/src/views/DocType.vue"],"sourcesContent":["<template>\r\n    <ion-page>\r\n        <ion-content :fullscreen=\"true\">\r\n          <div class=\"m-4\">\r\n          <ion-card class=\"mb-2 rounded-xl border-0 shadow-xs\">\r\n            <ion-accordion-group class=\" m-4\">\r\n              <ion-accordion class=\"rounded-xl\" value=\"first\">\r\n                <ion-item slot=\"header\" lines=\"none\">\r\n                  <ion-label>Basket Doctype</ion-label>\r\n                </ion-item>\r\n                <div class=\"ion-padding\" slot=\"content\" v-if=\"basketDisplay.length > 0\">\r\n                  <ul>\r\n                  <li class=\"ml-5\" v-for=\"doc in basketDisplay\" >{{ doc }}</li>\r\n                  </ul>\r\n                </div>\r\n                <div class=\"ion-padding\" slot=\"content\" v-else>\r\n                  <p class=\"ml-5\">No Document found</p>\r\n                </div>\r\n              </ion-accordion>\r\n              <ion-accordion class=\"rounded-xl\" value=\"second\">\r\n                <ion-item slot=\"header\" lines=\"none\">\r\n                  <ion-label>Pallet</ion-label>\r\n                </ion-item>\r\n                <div class=\"ion-padding \" slot=\"content\" v-if=\"palletDisplay.length > 0\">\r\n                  <ul>\r\n                  <li class=\"ml-5\" v-for=\"doc in palletDisplay\">\r\n                    <ion-checkbox label-placement=\"end\" justify=\"start\">{{ doc }} \r\n                    </ion-checkbox>\r\n                  </li>\r\n                  </ul>\r\n                </div>\r\n                <div class=\"ion-padding \" slot=\"content\" v-else>\r\n                  <p class=\"ml-5\">No Document found</p>\r\n                </div>\r\n              </ion-accordion>\r\n              <ion-select aria-label=\"Doctype\" v-model=\"selectedDoctype\" interface=\"popover\" placeholder=\"Select Basket Doctype\" fill=\"outline\"\r\n              @ionChange=\"closePopover\"\r\n              >\r\n                <ion-select-option v-for=\"doctype in basketDisplay\" :key=\"doctype\" :value=\"doctype\">\r\n                  {{ doctype }}\r\n                </ion-select-option>\r\n              </ion-select>\r\n            </ion-accordion-group>\r\n          </ion-card>\r\n          </div>\r\n           <!-- Dropdown for selecting Doctype -->\r\n           \r\n      </ion-content>\r\n    </ion-page>\r\n</template>\r\n<script setup lang=\"ts\">\r\nimport { IonPage, \r\n  IonContent, \r\n  IonAccordion, \r\n  IonAccordionGroup, \r\n  IonItem, \r\n  IonLabel, \r\n  IonCheckbox,\r\n  IonSelect,\r\n  IonSelectOption,\r\n  IonDatetime, IonDatetimeButton, IonCard\r\n} from '@ionic/vue';\r\nimport { ref, onMounted, watch } from 'vue'\r\nimport { frappeSDK } from '@/utils/frappeSDK';\r\nconst { db } = frappeSDK()\r\nconst basketDisplay = ref<any>([])\r\nconst palletDisplay = ref<any>([])\r\nconst doctypeOptions = ref(['Purchase Order', 'Sales Order']);\r\nconst selectedDoctype = ref(basketDisplay.value[0]);\r\nconst date = ref()\r\nconst displayDoctype = async (doctype: string) => {\r\n  const getBasket = await db.getDocList('Purchase Order',{\r\n  fields: ['name', 'creation'],\r\n\tlimit: 10, \r\n  //filters: [['name','=','BK202409-012']],\r\n\torderBy: { field: 'modified',order: 'desc',} \r\n  })\r\n  basketDisplay.value = getBasket.map(doc => doc.name)\r\n\r\n  //pallet\r\n  const getPallet = await db.getDocList('Sales Order',{\r\n    fields: ['name', 'creation'],\r\n    limit: 10, \r\n    orderBy: { field: 'modified',order: 'desc',} \r\n  })\r\n  palletDisplay.value = getPallet.map(doc => doc.name)\r\n}\r\nwatch(selectedDoctype, (newDoctype) => {\r\n  displayDoctype(newDoctype);\r\n  console.log(selectedDoctype.value);\r\n});\r\nonMounted(() => {\r\n  displayDoctype(selectedDoctype.value);\r\n})\r\n\r\nconst closePopover = () => {\r\n  document.querySelectorAll('ion-popover').forEach((popover) => popover.dismiss());\r\n};\r\n\r\n</script>\r\n<style scoped>\r\n  ion-item{\r\n    padding: 0;\r\n    border: none;\r\n    \r\n  }\r\n\r\n  ion-accordion {\r\n    margin: 10px auto;\r\n  }\r\n\r\n  ion-accordion.accordion-collapsing ion-item[slot='header'],\r\n  ion-accordion.accordion-collapsed ion-item[slot='header'] {\r\n    --background: var(--ion-color-light);\r\n    --color: var(--ion-color-light-contrast);\r\n  }\r\n\r\n  ion-accordion.accordion-expanding ion-item[slot='header'],\r\n  ion-accordion.accordion-expanded ion-item[slot='header'] {\r\n    --background: var(--ion-color-primary);\r\n    --color: var(--ion-color-primary-contrast);\r\n  }\r\n\r\n</style>","<template>\n\t<ion-page>\n\t\t<ion-header>\n\t\t\t<ion-toolbar>\n\t\t\t\t<ion-title class=\"ion-text-center\">รายการเอกสารทั้งหมด</ion-title>\n\t\t\t</ion-toolbar>\n\t\t</ion-header>\n\t\t<ion-content :fullscreen=\"true\">\n      <ion-refresher slot=\"fixed\" @ionRefresh=\"handleRefresh\">\n        <ion-refresher-content\n          pulling-text=\"Pull to refresh\"\n          refreshing-spinner=\"dots\"\n          refreshing-text=\"Refreshing...\"\n        >\n        </ion-refresher-content>\n      </ion-refresher>\n        <ListDoctype class=\"mt-32\" />\n\t\t</ion-content>\n\n\t</ion-page>\n</template>\n<script lang=\"ts\" setup>\nimport {\n\tIonPage,\n\tIonHeader,\n\tIonToolbar,\n\tIonTitle,\n\tIonContent,\n  IonList,\n  IonButton,\n  IonCard,\n  IonCardHeader,\n  modalController,\n  IonRefresher,\n  IonRefresherContent,\n  IonItem\n} from \"@ionic/vue\"\nimport { onMounted, ref } from \"vue\";\n//import { RouterLink } from \"vue-router\";\nimport DoctypeCreate from \"./doctype/DoctypeCreate.vue\";\nimport { urlPort  } from \"@/utils/checkIP\";\nimport ListDoctype from \"./doctype/ListDoctype.vue\";\nimport { App } from \"@capacitor/app\"\nimport { Browser } from \"@capacitor/browser\";\nimport { frappeSDK } from \"@/utils/frappeSDK\";\nonMounted(() => {\n  setTheme()\n\tgetDoctype()\n})\nconst displayDoc = ref(null)\nconst displayWorkOrder = ref(null)\nconst { db } = frappeSDK()\nconst message = ref('');\n\nconst getDoctype = async () => {\n  const allDoctype = await db.getDocList('Purchase Order', { \n\tfields: ['name', 'creation'],\n\tlimit: 10, \n  //filters: [['name','=','BK202409-012']],\n\torderBy: { field: 'modified',order: 'desc',} \n});\n  let docNameWithProducts = null;\n  for (const doc of allDoctype) {\n    const docType = await db.getDoc('Purchase Order', doc.name);\n    if (docType.items && docType.items.length > 0) {\n      docNameWithProducts = doc.name;\n      displayDoc.value = docType.items;\n      //console.log(docType,\"\\n Success\");\n    }\n    else {\n      docNameWithProducts = doc.name;\n      displayDoc.value = docType.idx;\n      //console.log(docType);\n      //console.log(displayDoc.value)\n    }\n    if(docType.item_code && docType.item_code.length > 0){\n      //console.log(docType.item_code)\n      displayWorkOrder.value = docType.item_code;\n      break;\n    } \n  }\n\n  if (!docNameWithProducts) {\n    console.log('No document found');\n  } else {\n    console.log('List all Docname',allDoctype, docNameWithProducts);\n  }\n};\nconst handleRefresh = async (event: CustomEvent) => {\n  try {\n    await getDoctype()\n    setTimeout(() => {\n      event.detail.complete();\n    }, 2000);\n  } catch (error) {\n    console.error(\"Error refreshing user data:\", error);\n  }\n}\n\nconst isDarkMode = ref(window.matchMedia('(prefers-color-scheme: dark)').matches)\n\tconst setTheme = () => {\n\t\tconst theme = localStorage.getItem(\"darkMode\")\n\t\tif(theme !== null) {\n\t\t\tisDarkMode.value = JSON.parse(theme)\n\t\t\tconsole.log(isDarkMode.value)\n\t\t\tdocument.documentElement.classList.toggle('ion-palette-dark', isDarkMode.value)\n\t\t} \n\t}\n</script>\n\n<style scoped>\n.newDoctype{\n  margin: auto;\n  display: block;\n\n}\nion-card{\n  height: 35vh;\n  overflow: auto;\n  scroll-behavior: smooth;\n}\n.sticky-header {\n  font-size: large;\n  position: sticky;\n  top: 0;\n  z-index: 100; \n  background-color: whitesmoke;\n}\n.work-order{\n  font-size: larger;\n}\n</style>"],"names":["db","frappeSDK","basketDisplay","ref","palletDisplay","selectedDoctype","displayDoctype","doctype","getBasket","doc","getPallet","watch","newDoctype","onMounted","closePopover","popover","setTheme","getDoctype","displayDoc","displayWorkOrder","allDoctype","docNameWithProducts","docType","handleRefresh","event","error","isDarkMode","theme"],"mappings":"2iBAgEM,KAAA,CAAE,GAAAA,CAAG,EAAIC,EAAU,EACnBC,EAAgBC,EAAS,EAAE,EAC3BC,EAAgBD,EAAS,EAAE,EACVA,EAAI,CAAC,iBAAkB,aAAa,CAAC,EAC5D,MAAME,EAAkBF,EAAID,EAAc,MAAM,CAAC,CAAC,EACrCC,EAAI,EACX,MAAAG,EAAiB,MAAOC,GAAoB,CAChD,MAAMC,EAAY,MAAMR,EAAG,WAAW,iBAAiB,CACvD,OAAQ,CAAC,OAAQ,UAAU,EAC5B,MAAO,GAEP,QAAS,CAAE,MAAO,WAAW,MAAO,MAAO,CAAA,CACzC,EACDE,EAAc,MAAQM,EAAU,IAAIC,GAAOA,EAAI,IAAI,EAGnD,MAAMC,EAAY,MAAMV,EAAG,WAAW,cAAc,CAClD,OAAQ,CAAC,OAAQ,UAAU,EAC3B,MAAO,GACP,QAAS,CAAE,MAAO,WAAW,MAAO,MAAO,CAAA,CAC5C,EACDI,EAAc,MAAQM,EAAU,IAAID,GAAOA,EAAI,IAAI,CACrD,EACME,EAAAN,EAAkBO,GAAe,CACrCN,EAAyB,EACjB,QAAA,IAAID,EAAgB,KAAK,CAAA,CAClC,EACDQ,EAAU,IAAM,CACdP,EAAeD,EAAgB,KAAK,CAAA,CACrC,EAED,MAAMS,EAAe,IAAM,CAChB,SAAA,iBAAiB,aAAa,EAAE,QAASC,GAAYA,EAAQ,SAAS,CACjF,k+CCpDAF,EAAU,IAAM,CACLG,EAAA,EACCC,EAAA,CAAA,CACX,EACK,MAAAC,EAAaf,EAAI,IAAI,EACrBgB,EAAmBhB,EAAI,IAAI,EAC3B,CAAE,GAAAH,CAAG,EAAIC,EAAU,EACTE,EAAI,EAAE,EAEtB,MAAMc,EAAa,SAAY,CAC7B,MAAMG,EAAa,MAAMpB,EAAG,WAAW,iBAAkB,CAC1D,OAAQ,CAAC,OAAQ,UAAU,EAC3B,MAAO,GAEP,QAAS,CAAE,MAAO,WAAW,MAAO,MAAO,CAAA,CAC3C,EACC,IAAIqB,EAAsB,KAC1B,UAAWZ,KAAOW,EAAY,CAC5B,MAAME,EAAU,MAAMtB,EAAG,OAAO,iBAAkBS,EAAI,IAAI,EAY1D,GAXIa,EAAQ,OAASA,EAAQ,MAAM,OAAS,GAC1CD,EAAsBZ,EAAI,KAC1BS,EAAW,MAAQI,EAAQ,QAI3BD,EAAsBZ,EAAI,KAC1BS,EAAW,MAAQI,EAAQ,KAI1BA,EAAQ,WAAaA,EAAQ,UAAU,OAAS,EAAE,CAEnDH,EAAiB,MAAQG,EAAQ,UACjC,KAAA,CACF,CAGGD,EAGK,QAAA,IAAI,mBAAmBD,EAAYC,CAAmB,EAF9D,QAAQ,IAAI,mBAAmB,CAInC,EACME,EAAgB,MAAOC,GAAuB,CAC9C,GAAA,CACF,MAAMP,EAAW,EACjB,WAAW,IAAM,CACfO,EAAM,OAAO,SAAS,GACrB,GAAI,QACAC,EAAO,CACN,QAAA,MAAM,8BAA+BA,CAAK,CAAA,CAEtD,EAEMC,EAAavB,EAAI,OAAO,WAAW,8BAA8B,EAAE,OAAO,EACzEa,EAAW,IAAM,CAChB,MAAAW,EAAQ,aAAa,QAAQ,UAAU,EAC1CA,IAAU,OACDD,EAAA,MAAQ,KAAK,MAAMC,CAAK,EAC3B,QAAA,IAAID,EAAW,KAAK,EAC5B,SAAS,gBAAgB,UAAU,OAAO,mBAAoBA,EAAW,KAAK,EAEhF"}