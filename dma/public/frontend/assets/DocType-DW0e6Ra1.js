import{h as B,d as P,c as T,o as V,p as x,q as b,n as w,r as M,t as R,v as E,I as S,j,k as q,l as A,w as F,x as H}from"./index-D7vsvXlJ.js";import{d as L,a as r,w as W,b as O,j as k,k as a,q as o,l,n as s,D as v,C as n,P as g,F as y,M as D,H as I,B as C}from"./frappe-ui-CEOsh18x.js";const G={class:"m-4"},J={key:0,class:"ion-padding",slot:"content"},K={class:"ml-5"},U={key:1,class:"ion-padding",slot:"content"},$={key:0,class:"ion-padding",slot:"content"},z={class:"ml-5"},Q={key:1,class:"ion-padding",slot:"content"},X=L({__name:"ListDoctype",setup(N){const{db:p}=B(),c=r([]),f=r([]);r(["Purchase Order","Sales Order"]);const d=r(c.value[0]);r();const h=async m=>{const e=await p.getDocList("Purchase Order",{fields:["name","creation"],limit:10,orderBy:{field:"modified",order:"desc"}});c.value=e.map(i=>i.name);const t=await p.getDocList("Sales Order",{fields:["name","creation"],limit:10,orderBy:{field:"modified",order:"desc"}});f.value=t.map(i=>i.name)};W(d,m=>{h(),console.log(d.value)}),O(()=>{h(d.value)});const _=()=>{document.querySelectorAll("ion-popover").forEach(m=>m.dismiss())};return(m,e)=>(a(),k(o(P),null,{default:l(()=>[s(o(S),{fullscreen:!0},{default:l(()=>[v("div",G,[s(o(T),{class:"mb-2 rounded-xl border-0 shadow-xs"},{default:l(()=>[s(o(V),{class:"m-4"},{default:l(()=>[s(o(x),{class:"rounded-xl",value:"first"},{default:l(()=>[s(o(b),{slot:"header",lines:"none"},{default:l(()=>[s(o(w),null,{default:l(()=>e[1]||(e[1]=[g("Basket Doctype")])),_:1,__:[1]})]),_:1}),c.value.length>0?(a(),n("div",J,[v("ul",null,[(a(!0),n(y,null,D(c.value,t=>(a(),n("li",K,I(t),1))),256))])])):(a(),n("div",U,e[2]||(e[2]=[v("p",{class:"ml-5"},"No Document found",-1)])))]),_:1}),s(o(x),{class:"rounded-xl",value:"second"},{default:l(()=>[s(o(b),{slot:"header",lines:"none"},{default:l(()=>[s(o(w),null,{default:l(()=>e[3]||(e[3]=[g("Pallet")])),_:1,__:[3]})]),_:1}),f.value.length>0?(a(),n("div",$,[v("ul",null,[(a(!0),n(y,null,D(f.value,t=>(a(),n("li",z,[s(o(M),{"label-placement":"end",justify:"start"},{default:l(()=>[g(I(t),1)]),_:2},1024)]))),256))])])):(a(),n("div",Q,e[4]||(e[4]=[v("p",{class:"ml-5"},"No Document found",-1)])))]),_:1}),s(o(R),{"aria-label":"Doctype",modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=t=>d.value=t),interface:"popover",placeholder:"Select Basket Doctype",fill:"outline",onIonChange:_},{default:l(()=>[(a(!0),n(y,null,D(c.value,t=>(a(),k(o(E),{key:t,value:t},{default:l(()=>[g(I(t),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})])]),_:1})]),_:1}))}}),Y=C(X,[["__scopeId","data-v-cf67454f"]]),Z=L({__name:"DocType",setup(N){O(()=>{m(),d()});const p=r(null),c=r(null),{db:f}=B();r("");const d=async()=>{const e=await f.getDocList("Purchase Order",{fields:["name","creation"],limit:10,orderBy:{field:"modified",order:"desc"}});let t=null;for(const i of e){const u=await f.getDoc("Purchase Order",i.name);if(u.items&&u.items.length>0?(t=i.name,p.value=u.items):(t=i.name,p.value=u.idx),u.item_code&&u.item_code.length>0){c.value=u.item_code;break}}t?console.log("List all Docname",e,t):console.log("No document found")},h=async e=>{try{await d(),setTimeout(()=>{e.detail.complete()},2e3)}catch(t){console.error("Error refreshing user data:",t)}},_=r(window.matchMedia("(prefers-color-scheme: dark)").matches),m=()=>{const e=localStorage.getItem("darkMode");e!==null&&(_.value=JSON.parse(e),console.log(_.value),document.documentElement.classList.toggle("ion-palette-dark",_.value))};return(e,t)=>(a(),k(o(P),null,{default:l(()=>[s(o(j),null,{default:l(()=>[s(o(q),null,{default:l(()=>[s(o(A),{class:"ion-text-center"},{default:l(()=>t[0]||(t[0]=[g("รายการเอกสารทั้งหมด")])),_:1,__:[0]})]),_:1})]),_:1}),s(o(S),{fullscreen:!0},{default:l(()=>[s(o(F),{slot:"fixed",onIonRefresh:h},{default:l(()=>[s(o(H),{"pulling-text":"Pull to refresh","refreshing-spinner":"dots","refreshing-text":"Refreshing..."})]),_:1}),s(Y,{class:"mt-32"})]),_:1})]),_:1}))}}),oe=C(Z,[["__scopeId","data-v-67a80fb1"]]);export{oe as default};
//# sourceMappingURL=DocType-DW0e6Ra1.js.map
